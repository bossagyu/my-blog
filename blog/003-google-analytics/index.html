<!doctype html><html lang=ja-jp><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-5JL2R6XT6H"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5JL2R6XT6H")</script><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://bossagyu.com/images/favicon.png><title>HugoでGoogle Analyticsの設定をする方法 | Bossagyu Blog</title><meta name=title content="HugoでGoogle Analyticsの設定をする方法"><meta name=description content="概要 HugoをでGoogle Analyticsを設定する方法をサクッと解説します。
実現までの流れ Google Analyticsへの登録 トラッキングIDの取得 Hugoの設定にトラッキングIDを追加 Google Analyticsの登録 [GA4] アナリティクスで新しいウェブサイトまたはアプリのセットアップを行う に従い登録を行います。
データストリームを追加すると、トラッキングIDが取得できるのでメモしておきます。 ※ トラッキングIDは日本語訳の影響か、測定IDという表示になっています。
Hugoの設定にトラッキングIDを追加 tomlに設定を追加 config.tomlにgoogleAnalytics = トラッキングIDを追加します。
baseURL = 'https://bossagyu.com' languageCode = 'ja-jp' title = 'Bossagyu Blog' theme = 'hugo-bearcub' googleAnalytics = &#34;G-1234ABCDEF&#34; # ↑ この行を追加、トラッキングIDは自分のものに変更してください。トラッキングコードを埋め込む テンプレートによってはtomlの設定を入れるだけで読めるものもあるみたいですが、 私の使用しているbearcubのテンプレートは対応してなかったので、 自分でヘッダにトラッキングコードを読み込むように追加します。
コードスニペットについてはまくまく Hugo ノートを参考にさせていただきました。
トラッキングコードを読むために layouts/partials/analytics.html を作成する。
{{ if not .Site.IsServer }} {{ with .Site.GoogleAnalytics }} <!-- Google tag (gtag.js) --> <script async src=&#34;https://www.googletagmanager.com/gtag/js?id={{ . }}&#34;></script> <script> window.dataLayer = window."><meta name=keywords content><meta property="og:title" content="HugoでGoogle Analyticsの設定をする方法"><meta property="og:description" content="概要 HugoをでGoogle Analyticsを設定する方法をサクッと解説します。
実現までの流れ Google Analyticsへの登録 トラッキングIDの取得 Hugoの設定にトラッキングIDを追加 Google Analyticsの登録 [GA4] アナリティクスで新しいウェブサイトまたはアプリのセットアップを行う に従い登録を行います。
データストリームを追加すると、トラッキングIDが取得できるのでメモしておきます。 ※ トラッキングIDは日本語訳の影響か、測定IDという表示になっています。
Hugoの設定にトラッキングIDを追加 tomlに設定を追加 config.tomlにgoogleAnalytics = トラッキングIDを追加します。
baseURL = 'https://bossagyu.com' languageCode = 'ja-jp' title = 'Bossagyu Blog' theme = 'hugo-bearcub' googleAnalytics = &#34;G-1234ABCDEF&#34; # ↑ この行を追加、トラッキングIDは自分のものに変更してください。トラッキングコードを埋め込む テンプレートによってはtomlの設定を入れるだけで読めるものもあるみたいですが、 私の使用しているbearcubのテンプレートは対応してなかったので、 自分でヘッダにトラッキングコードを読み込むように追加します。
コードスニペットについてはまくまく Hugo ノートを参考にさせていただきました。
トラッキングコードを読むために layouts/partials/analytics.html を作成する。
{{ if not .Site.IsServer }} {{ with .Site.GoogleAnalytics }} <!-- Google tag (gtag.js) --> <script async src=&#34;https://www.googletagmanager.com/gtag/js?id={{ . }}&#34;></script> <script> window.dataLayer = window."><meta property="og:type" content="article"><meta property="og:url" content="https://bossagyu.com/blog/003-google-analytics/"><meta property="og:image" content="https://bossagyu.com/images/share.webp"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-12-09T18:09:42+09:00"><meta property="article:modified_time" content="2023-12-09T18:09:42+09:00"><meta property="fb:admins" content="0000000000"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bossagyu.com/images/share.webp"><meta name=twitter:title content="HugoでGoogle Analyticsの設定をする方法"><meta name=twitter:description content="概要 HugoをでGoogle Analyticsを設定する方法をサクッと解説します。
実現までの流れ Google Analyticsへの登録 トラッキングIDの取得 Hugoの設定にトラッキングIDを追加 Google Analyticsの登録 [GA4] アナリティクスで新しいウェブサイトまたはアプリのセットアップを行う に従い登録を行います。
データストリームを追加すると、トラッキングIDが取得できるのでメモしておきます。 ※ トラッキングIDは日本語訳の影響か、測定IDという表示になっています。
Hugoの設定にトラッキングIDを追加 tomlに設定を追加 config.tomlにgoogleAnalytics = トラッキングIDを追加します。
baseURL = 'https://bossagyu.com' languageCode = 'ja-jp' title = 'Bossagyu Blog' theme = 'hugo-bearcub' googleAnalytics = &#34;G-1234ABCDEF&#34; # ↑ この行を追加、トラッキングIDは自分のものに変更してください。トラッキングコードを埋め込む テンプレートによってはtomlの設定を入れるだけで読めるものもあるみたいですが、 私の使用しているbearcubのテンプレートは対応してなかったので、 自分でヘッダにトラッキングコードを読み込むように追加します。
コードスニペットについてはまくまく Hugo ノートを参考にさせていただきました。
トラッキングコードを読むために layouts/partials/analytics.html を作成する。
{{ if not .Site.IsServer }} {{ with .Site.GoogleAnalytics }} <!-- Google tag (gtag.js) --> <script async src=&#34;https://www.googletagmanager.com/gtag/js?id={{ . }}&#34;></script> <script> window.dataLayer = window."><meta name=twitter:site content="@example"><meta itemprop=name content="HugoでGoogle Analyticsの設定をする方法"><meta itemprop=description content="概要 HugoをでGoogle Analyticsを設定する方法をサクッと解説します。
実現までの流れ Google Analyticsへの登録 トラッキングIDの取得 Hugoの設定にトラッキングIDを追加 Google Analyticsの登録 [GA4] アナリティクスで新しいウェブサイトまたはアプリのセットアップを行う に従い登録を行います。
データストリームを追加すると、トラッキングIDが取得できるのでメモしておきます。 ※ トラッキングIDは日本語訳の影響か、測定IDという表示になっています。
Hugoの設定にトラッキングIDを追加 tomlに設定を追加 config.tomlにgoogleAnalytics = トラッキングIDを追加します。
baseURL = 'https://bossagyu.com' languageCode = 'ja-jp' title = 'Bossagyu Blog' theme = 'hugo-bearcub' googleAnalytics = &#34;G-1234ABCDEF&#34; # ↑ この行を追加、トラッキングIDは自分のものに変更してください。トラッキングコードを埋め込む テンプレートによってはtomlの設定を入れるだけで読めるものもあるみたいですが、 私の使用しているbearcubのテンプレートは対応してなかったので、 自分でヘッダにトラッキングコードを読み込むように追加します。
コードスニペットについてはまくまく Hugo ノートを参考にさせていただきました。
トラッキングコードを読むために layouts/partials/analytics.html を作成する。
{{ if not .Site.IsServer }} {{ with .Site.GoogleAnalytics }} <!-- Google tag (gtag.js) --> <script async src=&#34;https://www.googletagmanager.com/gtag/js?id={{ . }}&#34;></script> <script> window.dataLayer = window."><meta itemprop=datePublished content="2023-12-09T18:09:42+09:00"><meta itemprop=dateModified content="2023-12-09T18:09:42+09:00"><meta itemprop=wordCount content="135"><meta itemprop=image content="https://bossagyu.com/images/share.webp"><meta itemprop=keywords content><meta name=referrer content="no-referrer-when-downgrade"><link href=/style.min.css rel=stylesheet><link href=/syntax.min.css rel=stylesheet></head><body><header><a class=skip-link href=#main-content></a>
<a href=/ class=title><h1>Bossagyu Blog</h1></a><nav><a href=/>Home</a>
<a href=/></a>
<a href=/blog/>Blog</a>
<a href=https://bossagyu.com/en/blog/003-google-analytics/>en-US 🇺🇸</a></nav></header><main id=main-content><h1>HugoでGoogle Analyticsの設定をする方法</h1><p class=byline><time datetime=2023-12-09 pubdate>2023-12-09</time></p><content><h2 id=概要>概要</h2><p>HugoをでGoogle Analyticsを設定する方法をサクッと解説します。</p><h2 id=実現までの流れ>実現までの流れ</h2><ol><li>Google Analyticsへの登録</li><li>トラッキングIDの取得</li><li>Hugoの設定にトラッキングIDを追加</li></ol><h2 id=google-analyticsの登録>Google Analyticsの登録</h2><p><a href="https://support.google.com/analytics/answer/9304153?hl=ja">[GA4] アナリティクスで新しいウェブサイトまたはアプリのセットアップを行う</a>
に従い登録を行います。<br>データストリームを追加すると、トラッキングIDが取得できるのでメモしておきます。
<img src=/blog/img-003-001.png alt=img-003-001.png>
※ トラッキングIDは日本語訳の影響か、測定IDという表示になっています。</p><h2 id=hugoの設定にトラッキングidを追加>Hugoの設定にトラッキングIDを追加</h2><h3 id=tomlに設定を追加>tomlに設定を追加</h3><p>config.tomlに<code>googleAnalytics = トラッキングID</code>を追加します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>baseURL</span> = <span style=color:#e6db74>&#39;https://bossagyu.com&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>languageCode</span> = <span style=color:#e6db74>&#39;ja-jp&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#39;Bossagyu Blog&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>theme</span> = <span style=color:#e6db74>&#39;hugo-bearcub&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>googleAnalytics</span> = <span style=color:#e6db74>&#34;G-1234ABCDEF&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ↑ この行を追加、トラッキングIDは自分のものに変更してください。</span></span></span></code></pre></div><h3 id=トラッキングコードを埋め込む>トラッキングコードを埋め込む</h3><p>テンプレートによってはtomlの設定を入れるだけで読めるものもあるみたいですが、
私の使用している<a href=https://github.com/clente/hugo-bearcub/tree/main>bearcub</a>のテンプレートは対応してなかったので、
自分でヘッダにトラッキングコードを読み込むように追加します。</p><p>コードスニペットについては<a href=https://github.com/clente/hugo-bearcub/tree/main>まくまく Hugo ノート</a>を参考にさせていただきました。</p><p>トラッキングコードを読むために <code>layouts/partials/analytics.html</code> を作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ if not .Site.IsServer }}
</span></span><span style=display:flex><span>{{ with .Site.GoogleAnalytics }}
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- Google tag (gtag.js) --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>async</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://www.googletagmanager.com/gtag/js?id={{ . }}&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>dataLayer</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>dataLayer</span> <span style=color:#f92672>||</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>gtag</span>(){<span style=color:#a6e22e>dataLayer</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>arguments</span>);}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gtag</span>(<span style=color:#e6db74>&#39;js&#39;</span>, <span style=color:#66d9ef>new</span> Date());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gtag</span>(<span style=color:#e6db74>&#39;config&#39;</span>, <span style=color:#e6db74>&#39;{{ . }}&#39;</span>);
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>{{ end }}
</span></span><span style=display:flex><span>{{ end }}</span></span></code></pre></div><p>ページヘッダで <code>analytics.html</code> を読み込むようにする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># テンプレートの内容をコピーしてきてオーバーライドする</span>
</span></span><span style=display:flex><span>cp themes/hugo-bearcub/layouts/_default/baseof.html layouts/_default/baseof.html 
</span></span><span style=display:flex><span>vim layouts/_default/baseof.html </span></span></code></pre></div><p>baseof.htmlに<code>{{- partial "analytics" . -}}</code> を追加する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ with .Site.LanguageCode }}{{ . }}{{ else }}en-US{{ end }}&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  {{- partial &#34;analytics&#34; . -}}
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>http-equiv</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;X-Clacks-Overhead&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;GNU Terry Pratchett&#34;</span> <span style=color:#960050;background-color:#1e0010>/</span></span></span></code></pre></div><p>上記ソースコードを追加した状態で、再度ビルドするとGoogle Analyticsにデータが送信されるようになります。</p><h2 id=tips>tips</h2><p>こちらの対応をしても、Google Analyticsにデータが連携されていないように見える場合は、タグの追加がうまくいっていない可能性があります。<br>まずはタグがちゃんと入っているかの切り分けをするために、googleデベロッパーツールを開きトラッキングがhtml内に含まれているか確認してみるとよいです。</p></content><p></p></main><footer><small>©2023 Bossagyu |</small></footer></body></html>