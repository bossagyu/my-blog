+++
title = 'ITIL v4 キャパシティ及びパフォーマンス管理について解説'
description = 'ITIL v4のキャパシティ・パフォーマンス管理を解説。レイテンシー要件の特定からスループット測定、Dynatraceを使った可視化まで実務経験を交えて紹介します。'
date = 2024-02-27T08:53:36+09:00
draft = false
categories = ['Management']
tags = ['ITIL', 'Capacity Management', 'Performance Management']
+++

## 概要
この記事では、ITIL v4のキャパシティ及びパフォーマンス管理について説明します。
た、理解した内容をもとに自分の経験を当てはめキャパシティ及びパフォーマンス管理のプロセスについて説明します。

## キャパシティおよびパフォーマンス管理とは
サービス及びサービスを支えるリソースのパフォーマンスを管理することです。  
キャパシティとパフォーマンスの管理活動を通じて、サービスのパフォーマンスを最適化し、サービスのキャパシティを適切に確保することが目的です。

## キャパシティ及びパフォーマンス管理のプロセス
キャパシティ及びパフォーマンス管理のプロセスは以下の2つがあります。

* キャパシティとパフォーマンスコントロールの確立
* サービスのキャパシティとパフォーマンスの分析と改善

### キャパシティとパフォーマンスコントロールの確立
キャパシティとパフォーマンスコントロールの確立は、サービスが利用するITリソースの使用量と性能基準について、要件を利害関係者と合意し、それらを評価するタイミング・基準値・報告形式を決めることです。

以下の流れで実現されます。

1. サービスキャパシティとパフォーマンス要件の特定
2. サービスキャパシティとパフォーマンス要件の合意
3. キャパシティとパフォーマンスの要件の決定
4. キャパシティとパフォーマンス評価指標とレポートの設計

上記プロセスに対して筆者の経験を当てはめると以下の通りになりました。

* サービスキャパシティとパフォーマンス要件の特定
  * 筆者は社内PFとしてAPIを提供していたため、社内の利用者から求められるレイテンシー性能（99%ile Nms）を特定しました。
  * 上記のしきい値をベースにパフォーマンス検証を行い、1インスタンスあたりのスループットを測定しました。
  * スループットをベースに必要となる金額を算出しました。
* サービスキャパシティとパフォーマンス要件の合意
  * レイテンシー性能とスループットを関係者と合意を行いました。
* キャパシティとパフォーマンスの要件の決定
  * こちらについては合意内容と変わらず
* キャパシティとパフォーマンス評価指標のレポートの設計
  * パフォーマンスについてはDynatraceと呼ばれるトレーシングツールを利用して計測、レポートを作成しました。



### サービスのキャパシティとパフォーマンスの分析と改善

サービスの出力ログ・インシデント情報から使用量と性能状況の問題点を分析する。

以下の流れで実現されます。

1. キャパシティとパフォーマンスの分析
2. キャパシティとパフォーマンスの報告
3. キャパシティとパフォーマンスの計画と設計

上記プロセスに対して筆者の経験を当てはめると以下の通りになりました。

* キャパシティとパフォーマンスの分析
  * パフォーマンスの分析については、Dynatraceを利用して、レイテンシー性能とスループットを分析しました。
  * インシデント情報から、パフォーマンスの問題点を特定しました。
* キャパシティとパフォーマンスの報告
  * パフォーマンスの報告については、Dynatraceのダッシュボードを利用して、レイテンシー性能とスループットを可視化しました。
* キャパシティとパフォーマンスの計画と設計
  * 利用者の拡大によって現状のキャパシティでは受け入れが難しくなります。
  * 需要予測を立て必要なキャパシティの増強計画を立てて、実行に移すようにしています。

## まとめ
今回はキャパシティ及びパフォーマンス管理について学習した内容に基づき筆者の経験を当てはめ説明しました。
キャパシティ及びパフォーマンス管理では、可用性管理相当のことをキャパシティとパフォーマンスの観点から行うことが理解できました。  
筆者の経験ではパフォーマンスの話と可用性の話についてはセットで行うことが多いのであまり独立して行わないと感じました。

